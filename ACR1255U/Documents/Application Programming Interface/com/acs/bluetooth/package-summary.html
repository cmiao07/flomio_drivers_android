<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Fri May 29 16:27:53 CST 2015 -->
<title>com.acs.bluetooth</title>
<meta name="date" content="2015-05-29">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.acs.bluetooth";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/acs/bluetooth/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Package</li>
<li>Next Package</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/acs/bluetooth/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.acs.bluetooth</h1>
<div class="docSummary">
<div class="block">Provides classes and interfaces for communicating with
ACS Bluetooth Low Energy readers on Android 4.3 (Jelly Bean MR2) or above.</div>
</div>
<p>See:&nbsp;<a href="#package_description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/Acr1255uj1Reader.OnBatteryLevelAvailableListener.html" title="interface in com.acs.bluetooth">Acr1255uj1Reader.OnBatteryLevelAvailableListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the battery level
 is available.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/Acr1255uj1Reader.OnBatteryLevelChangeListener.html" title="interface in com.acs.bluetooth">Acr1255uj1Reader.OnBatteryLevelChangeListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the battery level
 is changed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/Acr3901us1Reader.OnBatteryStatusAvailableListener.html" title="interface in com.acs.bluetooth">Acr3901us1Reader.OnBatteryStatusAvailableListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the battery status
 is available.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/Acr3901us1Reader.OnBatteryStatusChangeListener.html" title="interface in com.acs.bluetooth">Acr3901us1Reader.OnBatteryStatusChangeListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the battery status
 is changed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnAtrAvailableListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnAtrAvailableListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the ATR string is
 available.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnAuthenticationCompleteListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnAuthenticationCompleteListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the authentication
 is completed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnCardPowerOffCompleteListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnCardPowerOffCompleteListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the reader powers
 off the card.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnCardStatusAvailableListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnCardStatusAvailableListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the card status is
 available.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnCardStatusChangeListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnCardStatusChangeListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the card status is
 changed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnDeviceInfoAvailableListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnDeviceInfoAvailableListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the device
 information is available.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnEnableNotificationCompleteListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnEnableNotificationCompleteListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the reader get the
 result of enable notification.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnEscapeResponseAvailableListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnEscapeResponseAvailableListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the escape
 response is available.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.OnResponseApduAvailableListener.html" title="interface in com.acs.bluetooth">BluetoothReader.OnResponseApduAvailableListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the response APDU
 is available.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReaderGattCallback.OnConnectionStateChangeListener.html" title="interface in com.acs.bluetooth">BluetoothReaderGattCallback.OnConnectionStateChangeListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the connection
 state is changed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReaderManager.OnReaderDetectionListener.html" title="interface in com.acs.bluetooth">BluetoothReaderManager.OnReaderDetectionListener</a></td>
<td class="colLast">
<div class="block">Interface definition for a callback to be invoked when the reader is
 detected.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/Acr1255uj1Reader.html" title="class in com.acs.bluetooth">Acr1255uj1Reader</a></td>
<td class="colLast">
<div class="block">The <code>Acr1255uj1Reader</code> class represents ACR1255U-J1 Bluetooth
 readers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/Acr3901us1Reader.html" title="class in com.acs.bluetooth">Acr3901us1Reader</a></td>
<td class="colLast">
<div class="block">The <code>Acr3901us1Reader</code> class represents ACR3901U-S1 Bluetooth
 readers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReader.html" title="class in com.acs.bluetooth">BluetoothReader</a></td>
<td class="colLast">
<div class="block">The <code>BluetoothReader</code> class represents ACS Bluetooth readers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReaderGattCallback.html" title="class in com.acs.bluetooth">BluetoothReaderGattCallback</a></td>
<td class="colLast">
<div class="block">The <code>BluetoothReaderGattCallback</code> class is used to implement
 <code>BluetoothGatt</code> callback for ACS Bluetooth readers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/acs/bluetooth/BluetoothReaderManager.html" title="class in com.acs.bluetooth">BluetoothReaderManager</a></td>
<td class="colLast">
<div class="block">The <code>BluetoothReaderManager</code> class detects ACS Bluetooth readers.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="Package com.acs.bluetooth Description">Package com.acs.bluetooth Description</h2>
<div class="block">Provides classes and interfaces for communicating with
ACS Bluetooth Low Energy readers on Android 4.3 (Jelly Bean MR2) or above.



<h3>BLE Permissions</h3>
<p>To use this library, your app must declare the Bluetooth permission
<code>BLUETOOTH</code> and <code>BLUETOOTH_ADMIN</code> in your application
manifest file.
<pre>
&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot;/&gt;
&lt;uses-feature android:name=&quot;android.hardware.bluetooth_le&quot; android:required=&quot;true&quot;/&gt;
</pre>
<p>You can use the following code to determine whether BLE is supported on the
device.
<pre>
if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH_LE)) {
    Toast.makeText(this, R.string.ble_not_supported, Toast.LENGTH_SHORT).show();
}
</pre>
<p>If the Bluetooth is supported, you should create 
<code>BluetoothReaderManager</code> object for reader detection.
<pre>
private BluetoothReaderManager mBluetoothReaderManager =
        new BluetoothReaderManager();
</pre>



<h3>Finding the readers</h3>
<p>You can use the following method to search for available Bluetooth 
Low Energy devices in range.
<pre>
public class DeviceScanActivity extends ListActivity {
    private BluetoothManager mBluetoothManager;
    private BluetoothAdapter mBluetoothAdapter;
    private boolean mScanning;
    private Handler mHandler;
    // Stops scanning after 10 seconds.
    private static final long SCAN_PERIOD = 10000;
    ...
    mBluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
    mBluetoothAdapter = mBluetoothManager.getAdapter();
    ...
    private void scanLeDevice(boolean enable) {
        if (enable) {
            // Stops scanning after a predefined scan period.
            mHandler.postDelayed(new Runnable() {
                &#64;Override
                public void run() {
                    mScanning = false;
                    mBluetoothAdapter.stopLeScan(mLeScanCallback);
                }
            }, SCAN_PERIOD);
            mScanning = true;
            mBluetoothAdapter.startLeScan(mLeScanCallback);
        } else {
            mScanning = false;
            mBluetoothAdapter.stopLeScan(mLeScanCallback);
        }
    }
}
</pre>
<p>Once the reader is found, the result will be returned in
<code>BluetoothAdapter.LeScanCallback</code>.
<pre>
private LeScanCallback mLeScanCallback = new LeScanCallback() {
    &#64;Override
    public void onLeScan(final BluetoothDevice device, int rssi,
            byte[] scanRecord) {
        // TODO: Show the Bluetooth devices.
        ...
    }
};
</pre>



<h3>Creating GATT callback</h3>
<p>You need to create an BluetoothReaderGattCallback instance for connecting
with an ACS reader. You can use the BluetoothReaderGattCallback in two different
ways:
<ul>
<li>Create a new instance of BluetoothReaderGattCallback.</li>
<li>Extend the BluetoothReaderGattCallback and override the function to
handle low level Bluetooth data exchange.</li>
</ul>


<h4>Creating BluetoothReaderGattCallback object</h4>
<p>By default, you don't require to apply any change on the
BluetoothReaderGattCallback.
<pre>
public class ReaderActivity extends Activity {
    // Initialize the BluetoothReaderGattCallack.
    BluetoothReaderGattCallback mGattCallback = new BluetoothReaderGattCallback();
    ....
}
</pre>

<h4>Overriding BluetoothReaderGattCallback class</h4>
<p>If you want to manipulate the GATT callback directly. You can override those
callback and replace with your own code. If you didn't call the method from
super class, then the reader will be unable to receive the reader's response.
<pre>
BluetoothReaderGattCallback mGattCallback = new BluetoothReaderGattCallback() {

    ...
    // Override callback.
    &#64;Override
    public void onCharacteristicRead(BluetoothGatt gatt,
            BluetoothGattCharacteristic characteristic, int status) {
        super.onCharacteristicRead(gatt, characteristic, status);

        // TODO: Edit your code here.
        ...
    }
};
</pre>



<h3>Connecting the reader</h3>
<p>After finding the reader, you can create a GATT connection by using
device's hardware address and <code>BluetoothReaderGattCallback</code> instance.
The result will deliver by 
<a href="../../../com/acs/bluetooth/BluetoothReaderGattCallback.OnConnectionStateChangeListener.html#onConnectionStateChange(BluetoothGatt,%20int,%20int)"><code>onConnectionStateChange()</code></a> method.
<pre>
// Get a BluetoothDevice object for the given Bluetooth hardware address.
final BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(mDeviceAddress);

// Connect to GATT server.
BluetoothGatt mBluetoothGatt = device.connectGatt(this, false, mGattCallback);
</pre>



<h3>Receiving reader connection state notifications</h3>
<p>If the reader is connected successfully, the library will broadcast the
connection state. If you want to receive this notification, you need to register
a callback by calling
<a href="../../../com/acs/bluetooth/BluetoothReaderGattCallback.html#setOnConnectionStateChangeListener(com.acs.bluetooth.BluetoothReaderGattCallback.OnConnectionStateChangeListener)"><code>setOnConnectionStateChangeListener()</code></a> method before create the GATT connection.
<pre>
// Register BluetoothReaderGattCallback's listeners.
mGattCallback.setOnConnectionStateChangeListener(
        new OnConnectionStateChangeListener() {

    &#64;Override
    public void onConnectionStateChange(final BluetoothGatt gatt,
            final int state, final int newState) {

        // TODO: Show the connection state.
        ...
    }
};
</pre>



<h3>Detecting the reader</h3>
<p>Once the reader connection state is changed to connected, you need to call
<a href="../../../com/acs/bluetooth/BluetoothReaderManager.html#detectReader(BluetoothGatt,%20com.acs.bluetooth.BluetoothReaderGattCallback)"><code>detectReader()</code></a> method to detect reader.
<pre>
// Register BluetoothReaderGattCallback's listeners.
mGattCallback.setOnConnectionStateChangeListener(
        new OnConnectionStateChangeListener() {

    &#64;Override
    public void onConnectionStateChange(final BluetoothGatt gatt,
            final int state, final int newState) {
        if (newState == BluetoothProfile.STATE_CONNECTED) {
            // Detect the reader.
            if (mBluetoothReaderManager != null) {
                mBluetoothReaderManager.detectReader(gatt, mGattCallback);
            }
        } else if (newState == BluetoothProfile.STATE_DISCONNECTED) {
            mBluetoothReader = null;

            // Release resources occupied by Bluetooth GATT client.
            if (mBluetoothGatt != null) {
                mBluetoothGatt.close();
                mBluetoothGatt = null;
            }
        }
    }
};
</pre>
<p>The reader object will be returned by
<a href="../../../com/acs/bluetooth/BluetoothReaderManager.OnReaderDetectionListener.html#onReaderDetection(com.acs.bluetooth.BluetoothReader)"><code>onReaderDetection()</code></a> method. If the reader is not detected, the reader object
will be <code>null</code>.
<pre>
// Register BluetoothReaderManager's listeners.
mBluetoothReaderManager
        .setOnReaderDetectionListener(new OnReaderDetectionListener() {
    &#64;Override
    public void onReaderDetection(BluetoothReader reader) {

        // Check if the reader is detected or not.
        if (reader == null) {
            // TODO: Display error message
            ...
            return;
        }

        // Update the reader reference.
        mBluetoothReader = reader;

        // TODO: Update the reader's listeners.
        ...

        // TODO: Activate the reader.
        ...
    }
};
</pre>



<h3>Disconnecting the reader</h3>
<p>If you have finished the operation with the reader. You can disconnect the
reader by calling <code>BluetoothGatt.disconnect()</code> method.
<pre>
mBluetoothGatt.disconnect();
</pre>



<h3>Working with ACR3901U-S1 reader</h3>


<h4>Starting the bonding process</h4>
<p> If the reader is detected, you need to update the listeners and then call
<a href="../../../com/acs/bluetooth/Acr3901us1Reader.html#startBonding()"><code>startBonding()</code></a>
to start bonding process with the reader.
<pre>
Acr3901us1Reader mAcr3901us1Reader = null;
...
mBluetoothReaderManager.setOnReaderDetectionListener(new onReaderDetectionListener() {
    &#64;Override
    public void onReaderDetection(BluetoothReader bluetoothReader) {
        mAcr3901us1Reader = (Acr3901us1Reader) bluetoothReader;

        // TODO: Update listener.
        ...

        // Start bonding to reader.
        mAcr3901us1Reader.startBonding();
    }
};
</pre>


<h4>Connecting the broadcast receiver</h4>
<p>Your app must create <code>BroadcastReceiver</code> object to listen
<code>BluetoothDevice.ACTION_BOND_STATE_CHANGED</code>. Once the bond state is
changed to <code>BluetoothDevice.BOND_BONDED</code>, you must call
<a href="../../../com/acs/bluetooth/BluetoothReader.html#enableNotification(boolean)"><code>enableNotification()</code></a> method to enable battery, card status and response
notifications.
<pre>
private final BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver() {

    &#64;Override
    public void onReceive(Context context, Intent intent) {

        final String action = intent.getAction();

        if (BluetoothDevice.ACTION_BOND_STATE_CHANGED.equals(action)) {

            // Get your device.
            final BluetoothDevice device = mBluetoothAdapter
                    .getRemoteDevice(mDeviceAddress);
            final int state = device.getBondState();

            if (state == BluetoothDevice.BOND_BONDED) {
                if (mAcr3901us1Reader != null) {
                    // Enable notification.
                    mAcr3901us1Reader.enableNotification(true);
                }
            }
        }
    }
};
</pre>
<p>You need to register the broadcast receiver before call the
<a href="../../../com/acs/bluetooth/Acr3901us1Reader.html#startBonding()"><code>startBonding()</code></a> method.
<pre>
final IntentFilter intentFilter = new IntentFilter();

// Monitor bond state change.
intentFilter.addAction(BluetoothDevice.ACTION_BOND_STATE_CHANGED);
registerReceiver(mBroadcastReceiver, intentFilter);
</pre>


<h4>Getting the battery status</h4>
<p>If the reader is bonded successfully, the reader will broadcast the battery
status change event. If you want to receive this notification, you need to
register a callback by calling
<a href="../../../com/acs/bluetooth/Acr3901us1Reader.html#setOnBatteryStatusChangeListener(com.acs.bluetooth.Acr3901us1Reader.OnBatteryStatusChangeListener)"><code>setOnBatteryStatusChangeListener()</code></a> method.
<pre>
mAcr3901us1Reader.setOnBatteryStatusChangeListener(new OnBatteryStatusChangeListener() {
    &#64;Override
    public void onBatteryStatusChange(BluetoothReader bluetoothReader,
            int batteryStatus) {
        // TODO: Show the battery status.
        ...
    }
});
</pre>
<p>If the reader is authenticated successfully, you can call
<a href="../../../com/acs/bluetooth/Acr3901us1Reader.html#getBatteryStatus()"><code>getBatteryStatus()</code></a>
method to get battery status again.
<pre>
mAcr3901us1Reader.getBatteryStatus();
</pre>



<h3>Working with ACR1255U-J1 reader</h3>


<h4>Enabling the notification</h4>
<p> If the reader is detected, you need to update the listeners and then call
<a href="../../../com/acs/bluetooth/BluetoothReader.html#enableNotification(boolean)"><code>enableNotification(boolean)</code></a> to monitor battery, card status and response
notifications.
<pre>
Acr1255uj1Reader mAcr1255uj1Reader = null;
...
mBluetoothReaderManager.setOnReaderDetectionListener(new onReaderDetectionListener() {
    &#64;Override
    public void onReaderDetection(BluetoothReader bluetoothReader) {

        mAcr1255uj1Reader = (Acr1255uj1Reader) bluetoothReader;

        // TODO: Update listener.
        ...

        // Enable notification.
        mAcr1255uj1Reader.enableNotification(true);
    }
});
</pre>


<h4>Getting the battery level</h4>
<p>If the reader is bonded successfully, the reader will broadcast the battery
level change event. If you want to receive this notification, you need to
register a callback by calling
<a href="../../../com/acs/bluetooth/Acr1255uj1Reader.html#setOnBatteryLevelChangeListener(com.acs.bluetooth.Acr1255uj1Reader.OnBatteryLevelChangeListener)"><code>setOnBatteryLevelChangeListener()</code></a> method.
<pre>
mAcr1255uj1Reader.setOnBatteryLevelChangeListener(new OnBatteryLevelChangeListener() {
    &#64;Override
    public void onBatteryLevelChange(BluetoothReader bluetoothReader,
            int batteryLevel) {
        // TODO: Show the battery Level.
        ...
    }
});
</pre>
<p>You can call <a href="../../../com/acs/bluetooth/Acr1255uj1Reader.html#getBatteryLevel()"><code>getBatteryLevel()</code></a> method to get battery level again.
<pre>
mAcr1255uj1Reader.getBatteryLevel();
</pre>




<h3>Authenticating the reader</h3>
<p>If the reader's notification is enabled successfully, you can authenticate
the reader with master key by calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#authenticate(byte[])"><code>authenticate()</code></a>
method.
<pre>
mBluetoothReader.authenticate(masterKey);
</pre>
<p>If you want to receive the authentication result, you need to register a
callback by calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#setOnAuthenticationCompleteListener(com.acs.bluetooth.BluetoothReader.OnAuthenticationCompleteListener)"><code>setOnAuthenticationCompleteListener()</code></a> method.
<pre>
mBluetoothReader.setOnAuthenticationCompleteListener(new OnAuthenticationCompleteListener() {
    &#64;Override
    public void onAuthenticationComplete(BluetoothReader bluetoothReader,
            int errorCode) {
        // TODO: Show the authentication result.
        ...
    }
});
</pre>



<h3>Getting the device information</h3>
<p>If the reader is connected successfully, you can read the device information
by calling the following methods. If the device information is not supported, it
will return <code>false</code>.
<ul>
<li><a href="../../../com/acs/bluetooth/BluetoothReader.html#getDeviceInfo(int)"><code>getDeviceInfo(BluetoothReader.DEVICE_INFO_SYSTEM_ID)</code></a></li>
<li><a href="../../../com/acs/bluetooth/BluetoothReader.html#getDeviceInfo(int)"><code>getDeviceInfo(BluetoothReader.DEVICE_INFO_MODEL_NUMBER_STRING)</code></a></li>
<li><a href="../../../com/acs/bluetooth/BluetoothReader.html#getDeviceInfo(int)"><code>getDeviceInfo(BluetoothReader.DEVICE_INFO_SERIAL_NUMBER_STRING)</code></a></li>
<li><a href="../../../com/acs/bluetooth/BluetoothReader.html#getDeviceInfo(int)"><code>getDeviceInfo(BluetoothReader.DEVICE_INFO_FIRMWARE_REVISION_STRING)</code></a></li>
<li><a href="../../../com/acs/bluetooth/BluetoothReader.html#getDeviceInfo(int)"><code>getDeviceInfo(BluetoothReader.DEVICE_INFO_HARDWARE_REVISION_STRING)</code></a></li>
<li><a href="../../../com/acs/bluetooth/BluetoothReader.html#getDeviceInfo(int)"><code>getDeviceInfo(BluetoothReader.DEVICE_INFO_MANUFACTURER_NAME_STRING)</code></a></li>
</ul>
<p>If you want to receive the device information, you need to register a
callback by calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#setOnDeviceInfoAvailableListener(com.acs.bluetooth.BluetoothReader.OnDeviceInfoAvailableListener)"><code>setOnDeviceInfoAvailableListener()</code></a> method.
<pre>
mBluetoothReader.setOnDeviceInfoAvailableListener(new OnDeviceInfoAvailableListener() {
    &#64;Override
    public void onDeviceInfoAvailable(BluetoothReader bluetoothReader,
            int infoId, Object o, int status) {
        if (infoId == BluetoothReader.DEVICE_INFO_SYSTEM_ID) {
            // TODO: Show the system ID.
            ...
        } else if (infoId == BluetoothReader.DEVICE_INFO_MODEL_NUMBER_STRING) {
            // TODO: Show the model number string.
            ...
        } else if (infoId == BluetoothReader.DEVICE_INFO_SERIAL_NUMBER_STRING) {
            // TODO: Show the serial revision string.
            ...
        } else if (infoId == BluetoothReader.DEVICE_INFO_FIRMWARE_REVISION_STRING) {
            // TODO: Show the firmware revision string.
            ...
        } else if (infoId == BluetoothReader.DEVICE_INFO_HARDWARE_REVISION_STRING) {
            // TODO: Show the hardware revision string.
            ...
        } else if (infoId == BluetoothReader.DEVICE_INFO_MANUFACTURER_NAME_STRING) {
            // TODO: Show the manufacturer name string.
            ...
        }
    }
});
</pre>



<h3>Powering on the card</h3>
<p>If the reader is connected successfully, you can power on the card by calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#powerOnCard()"><code>powerOnCard()</code></a>
method.
<pre>
mBluetoothReader.powerOnCard();
</pre>
<p>If you want to receive the ATR string, you need to register a callback by
calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#setOnAtrAvailableListener(com.acs.bluetooth.BluetoothReader.OnAtrAvailableListener)"><code>setOnAtrAvailableListener()</code></a> method.
<pre>
mBluetoothReader.setOnAtrAvailableListener(new OnAtrAvailableListener() {
    &#64;Override
    public void onAtrAvailable(BluetoothReader bluetoothReader, byte[] atr,
            int errorCode) {
        // TODO: Show the ATR string.
        ...
    }
});
</pre>



<h3>Powering off the card</h3>
<p>If the reader is connected successfully, you can power off the card by
calling <a href="../../../com/acs/bluetooth/BluetoothReader.html#powerOffCard()"><code>powerOffCard()</code></a>
method.
<pre>
mBluetoothReader.powerOffCard();
</pre>
<p>If you want to receive the result after the reader powers off the card, you
need to register the callback by calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#setOnCardPowerOffCompleteListener(com.acs.bluetooth.BluetoothReader.OnCardPowerOffCompleteListener)"><code>setOnCardPowerOffCompleteListener()</code></a> method.
<pre>
mBluetoothReader.setOnCardPowerOffCompleteListener(new OnCardPowerOffCompleteListener() {
    &#64;Override
    public void onCardPowerOffComplete(BluetoothReader bluetoothReader,
            int result) {
        // TODO: Show the power off card response.
        ...
    }
});
</pre>



<h3>Getting the card status</h3>
<p>If the reader is connected successfully, the reader will broadcast the card
status change event. If you want to receive this notification, you need to
register a callback by calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#setOnCardStatusChangeListener(com.acs.bluetooth.BluetoothReader.OnCardStatusChangeListener)"><code>setOnCardStatusChangeListener()</code></a> method.
<pre>
mBluetoothReader.setOnCardStatusChangeListener(new OnCardStatusChangeListener() {
    &#64;Override
    public void onCardStatusChange(BluetoothReader bluetoothReader,
            int cardStatus) {
        // TODO: Show the card status.
        ...
    }
});
</pre>
<p>If the reader is connected successfully, you can call
<a href="../../../com/acs/bluetooth/BluetoothReader.html#getCardStatus()"><code>getCardStatus()</code></a> method
to get card status again.
<pre>
mBluetoothReader.getCardStatus();
</pre>
<p>If you want to receive the card status, you need to register a callback by
calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#setOnCardStatusAvailableListener(com.acs.bluetooth.BluetoothReader.OnCardStatusAvailableListener)"><code>setOnCardStatusAvailableListener()</code></a> method.
<pre>
mBluetoothReader.setOnCardStatusAvailableListener(new OnCardStatusAvailableListener() {
    &#64;Override
    public void onCardStatusAvailable(BluetoothReader bluetoothReader,
            int cardStatus, int errorCode) {
        // TODO: Show the card status.
        ...
    }
});
</pre>



<h3>Transmitting the APDU</h3>
<p>If the reader is connected successfully, you can transmit the APDU command by
calling <a href="../../../com/acs/bluetooth/BluetoothReader.html#transmitApdu(byte[])"><code>transmitApdu()</code></a> method.
<pre>
mBluetoothReader.transmitApdu(apdu);
</pre>
<p>If you want to receive the response APDU, you need to register a callback by
calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#setOnResponseApduAvailableListener(com.acs.bluetooth.BluetoothReader.OnResponseApduAvailableListener)"><code>setOnResponseApduAvailableListener()</code></a> method.
<pre>
mBluetoothReader.setOnResponseApduAvailableListener(new OnResponseApduAvailableListener() {
    &#64;Override
    public void onResponseApduAvailable(BluetoothReader bluetoothReader,
            byte[] apdu, int errorCode) {
        // TODO: Show the response APDU.
        ...
    }
});
</pre>



<h3>Transmitting the escape command</h3>
<p>If the reader is connected successfully, you can transmit the escape command
by calling <a href="../../../com/acs/bluetooth/BluetoothReader.html#transmitEscapeCommand(byte[])"><code>transmitEscapeCommand()</code></a> method.
<pre>
mBluetoothReader.transmitEscapeCommand(escapeCommand);
</pre>
<p>If you want to receive the escape response, you need to register a callback
by calling
<a href="../../../com/acs/bluetooth/BluetoothReader.html#setOnEscapeResponseAvailableListener(com.acs.bluetooth.BluetoothReader.OnEscapeResponseAvailableListener)"><code>setOnEscapeResponseAvailableListener()</code></a> method.
<pre>
mBluetoothReader.setOnEscapeResponseAvailableListener(new OnEscapeResponseAvailableListener() {
    &#64;Override
    public void onEscapeResponseAvailable(BluetoothReader bluetoothReader,
            byte[] response, int errorCode) {
        // TODO: Show the escape response.
        ...
    }
});
</pre></div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>1.0</dd></dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/acs/bluetooth/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Package</li>
<li>Next Package</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/acs/bluetooth/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><font size=-1>Copyright &copy; 2014-2015 Advanced Card Systems Ltd. All Rights Reserved.</font></small></p>
</body>
</html>
